<!-- Load the necessary media for CKEditor -->
{{ form.media }}

<form method="post" class="row g-3 needs-validation" novalidate>
    {% csrf_token %}

    <!-- Loop through all form fields dynamically -->
    {% for field in form %}
    <div class="col-12">
        <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
        <div class="input-group has-validation">
            {{ field }}  <!-- CKEditor will handle rich-text fields here -->
            <div class="invalid-feedback">{{ field.errors }}</div>
        </div>
    </div>
    {% endfor %}

    {% if form.non_field_errors %}
    <div class="col-12">
        <div class="alert alert-danger">{{ form.non_field_errors }}</div>
    </div>
    {% endif %}

    {% if submit_label == "Register" %}
    <div class="col-12">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="terms" required>
            <label class="form-check-label" for="terms">
                I agree to the <a href="#">terms and conditions</a>
            </label>
            <div class="invalid-feedback">
                You must agree before submitting.
            </div>
        </div>
    </div>
    {% endif %}

    <div class="col-12">
        <button class="btn btn-primary w-100" type="submit">{{ submit_label }}</button>
    </div>
</form>
